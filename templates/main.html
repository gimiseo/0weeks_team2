<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Bulma 3D ì¹´ë“œ ìºëŸ¬ì…€ â€“ í‘œì¤€ ë²„íŠ¼ ë™ì‘(Non-loop)</title>

<!-- Bulma CSS ë¶ˆëŸ¬ì˜¤ê¸° -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">

<style>
  /* =========================
     ğŸ”§ ì¹´ë“œ/ë¬´ëŒ€ ê´€ë ¨ CSS ë³€ìˆ˜
     ========================= */
  :root{
    --card-w: 240px;   /* ì¹´ë“œ ë„ˆë¹„ */
    --card-h: 320px;   /* ì¹´ë“œ ë†’ì´ */
    --gap-x: 140px;    /* ì¹´ë“œ ê°„ ì¢Œìš° ê°„ê²© (ì‘ê²Œ â†’ ë” ê²¹ì³ ë³´ì„) */
    --z-center: 220px; /* ì¤‘ì•™ ì¹´ë“œ ê¹Šì´ */
    --z-near: 120px;   /* ë°”ë¡œ ì˜† ì¹´ë“œ ê¹Šì´ */
    --z-far: 40px;     /* ê·¸ ì™¸ ì¹´ë“œ ê¹Šì´ */
    --stage-h: 520px;  /* ë¬´ëŒ€ ë†’ì´ */
  }

  .top-menu {
  position: fixed;
  top: 16px;
  right: 16px;
  z-index: 2000;
  display: flex;
  align-items: center;
}

.logout-text {
  margin-left: 8px;      /* ë§ˆì´í˜ì´ì§€ ë²„íŠ¼ê³¼ ê°„ê²© */
  font-weight: 600;
  color: #363636;        /* Bulma ê¸°ë³¸ ê¸€ììƒ‰ */
  cursor: pointer;       /* ë§ˆìš°ìŠ¤ ì˜¤ë²„ì‹œ ì†ê°€ë½ í‘œì‹œ */
}

.logout-text:hover {
  color: #ff3860;        /* hover ì‹œ Bulma danger ìƒ‰ìƒ */
}
  body { background:#f6fbf9; }

  /* ì „ì²´ ìºëŸ¬ì…€ ì»¨í…Œì´ë„ˆ */
  .carousel-3d {
    max-width: 980px;
    margin: 56px auto;
    padding: 12px 8px;
  }

  /* ì¹´ë“œ ë¬´ëŒ€(Stage) */
  .stage {
    position: relative;            /* ë‚´ë¶€ ë²„íŠ¼ absolute ë°°ì¹˜ìš© ê¸°ì¤€ */
    height: var(--stage-h);
    perspective: 1000px;           /* 3D ì›ê·¼ê° */
    overflow: visible;
    display: grid;
    place-items: center;
  }

  /* ê°œë³„ ì¹´ë“œ */
  .stage .item {
    position: absolute;
    left: 50%; top: 50%;
    width: var(--card-w); height: var(--card-h);
    border-radius: 18px;
    display: grid; place-items: center;
    transform: translate(-50%,-50%); /* ë¬´ëŒ€ ì¤‘ì•™ ì •ë ¬ */
    will-change: transform, opacity; /* ì• ë‹ˆë©”ì´ì…˜ ì„±ëŠ¥ ìµœì í™” */
    transition: transform .35s ease, opacity .25s ease, box-shadow .25s ease;
    user-select: none;
  }


  /* Bulma ë²„íŠ¼ ê¸°ë³¸ í¬ê¸° ì¡°ì • */
  .nav-btn.button {
    width: 48px; height: 48px;
    border-radius: 50%;
    display: grid; place-items: center;
  }
  .nav-btn[disabled] { opacity:.35; pointer-events: none; }

  /* ğŸŸ¢ ë²„íŠ¼ì„ ë¬´ëŒ€ ìœ„ì— ë„ìš°ëŠ” CSS */
  .stage .nav-btn {
    position: absolute;
    top: 50%;                       /* ë¬´ëŒ€ ì„¸ë¡œ ì¤‘ì•™ */
    transform: translateY(-50%);    /* ì •í™•íˆ ì¤‘ì•™ ì •ë ¬ */
    z-index: 999;                   /* ì¹´ë“œë³´ë‹¤ í•­ìƒ ìœ„ */
  }
  #prev { left: 16px; }             /* ì™¼ìª½ ë²„íŠ¼ ìœ„ì¹˜ */
  #next { right: 16px; }            /* ì˜¤ë¥¸ìª½ ë²„íŠ¼ ìœ„ì¹˜ */

  /* ë°ëª¨ ì¹´ë“œ ìŠ¤íƒ€ì¼ (ì„ì‹œ ì½˜í…ì¸  ë°•ìŠ¤) */
.demo-card {
  width: 82%; height: 62%;
  border-radius: 16px;
  background: rgb(137, 235, 137);   /* â† ë‹¨ìˆœí•œ ì´ˆë¡ìƒ‰ */
  border: 1px solid rgb(116, 243, 116);  /* ì§™ì€ ì´ˆë¡ í…Œë‘ë¦¬ (ì„ íƒì‚¬í•­) */
  display: grid; place-items: center;
  font-size: 18px; font-weight: 700; color:#fff; /* ê¸€ìëŠ” í°ìƒ‰ìœ¼ë¡œ */
  box-shadow: 0 6px 16px rgba(0,0,0,0.25);
}
.mypage-btn {
  position: fixed;
  top: 10px;
  right: 16px;
  z-index: 1000;  /* ì¹´ë“œ/ë²„íŠ¼ë³´ë‹¤ ìœ„ */
}

.wwl-label {
  position: fixed;   /* í™”ë©´ ê³ ì • */
  top: 10px;         /* ìƒë‹¨ ì—¬ë°± */
  left: 16px;        /* ì¢Œì¸¡ ì—¬ë°± */
  z-index: 2000;     /* ë‹¤ë¥¸ ìš”ì†Œë³´ë‹¤ ìœ„ */
  font-size: 30px;   /* ê¸€ì í¬ê¸° */
  font-weight: 700;  /* êµµê²Œ */
  color: #00c32e;    /* Bulma primary íŒŒë‘ìƒ‰ */
}

</style>
</head>
<body>
    <div class="wwl-label">WeeklyWeLearned</div>
<div class="top-menu">
  <a href="#mypage" class="button is-primary">ë§ˆì´í˜ì´ì§€</a>
  <span class="logout-text">ë¡œê·¸ì•„ì›ƒ</span>
</div>
<section class="carousel-3d" role="region" aria-roledescription="carousel" aria-label="í”„ë¡œì íŠ¸ ì¹´ë“œ ìºëŸ¬ì…€ (í‘œì¤€ ë²„íŠ¼ ë™ì‘)">
  <!-- ğŸ­ ë¬´ëŒ€ -->
  <div class="stage" id="stage" aria-live="polite">
    <!-- âœ… ì¹´ë“œë“¤ (ë‚´ìš©ì€ .demo-card ë‚´ë¶€ êµì²´ ê°€ëŠ¥) -->
    <article class="item card-0"><div class="demo-card">week0</div></article>
<article class="item card-1"><div class="demo-card">week1</div></article>
<article class="item card-2"><div class="demo-card">week2</div></article>
<article class="item card-3"><div class="demo-card">week3</div></article>
<article class="item card-4"><div class="demo-card">week4</div></article>
<article class="item card-5"><div class="demo-card">week5</div></article>
<article class="item card-6"><div class="demo-card">week6</div></article>
<article class="item card-7"><div class="demo-card">week7</div></article>
<article class="item card-8"><div class="demo-card">week8</div></article>
<article class="item card-9"><div class="demo-card">week9</div></article>
<article class="item card-10"><div class="demo-card">week10</div></article>
<article class="item card-11"><div class="demo-card">week11</div></article>
<article class="item card-12"><div class="demo-card">week12</div></article>
<article class="item card-13"><div class="demo-card">week13</div></article>
<article class="item card-14"><div class="demo-card">week14</div></article>
<article class="item card-15"><div class="demo-card">week15</div></article>
<article class="item card-16"><div class="demo-card">week16</div></article>
<article class="item card-17"><div class="demo-card">week17</div></article>
<article class="item card-18"><div class="demo-card">week18</div></article>
<article class="item card-19"><div class="demo-card">week19</div></article>
<article class="item card-20"><div class="demo-card">week20</div></article>

    <!-- ğŸŸ¢ í•­ìƒ ë¬´ëŒ€ ìœ„ì— ë–  ìˆëŠ” ë²„íŠ¼ -->
    <button class="button is-dark is-light nav-btn" id="prev" aria-label="ì´ì „">â—€</button>
    <button class="button is-dark is-light nav-btn" id="next" aria-label="ë‹¤ìŒ">â–¶</button>
  </div>
</section>

<script>
  /* =========================
     JS ìš”ì†Œ/ìƒíƒœ ì´ˆê¸°í™”
     ========================= */
  const stage  = document.getElementById('stage');
  const items  = Array.from(stage.querySelectorAll('.item'));
  const prev   = document.getElementById('prev');
  const next   = document.getElementById('next');

  let index = 0; // í˜„ì¬ ì¤‘ì•™ ì¹´ë“œ ì¸ë±ìŠ¤

  // ìœ í‹¸: ê°’ í´ë¨í”„
  const clamp = (v, min, max) => Math.max(min, Math.min(max, v));
  // CSS ë³€ìˆ˜ ì½ê¸°
  const getVar = (name) =>
    getComputedStyle(document.documentElement).getPropertyValue(name).trim().replace('px','');

  /* =========================
     ë Œë”ë§ í•¨ìˆ˜
     ========================= */
  function render() {
    const gapX     = parseFloat(getVar('--gap-x'));
    const Z_CENTER = parseFloat(getVar('--z-center'));
    const Z_NEAR   = parseFloat(getVar('--z-near'));
    const Z_FAR    = parseFloat(getVar('--z-far'));

    items.forEach((el, i) => {
      const off = i - index;   // ì¤‘ì•™ ê¸°ì¤€ ìƒëŒ€ ìœ„ì¹˜
      const abs = Math.abs(off);

      // ìœ„ì¹˜/ê¹Šì´/ìŠ¤ì¼€ì¼/íˆ¬ëª…ë„ ê³„ì‚°
      const x       = off * gapX;
      const depth   = (off === 0) ? Z_CENTER : (abs === 1 ? Z_NEAR : Z_FAR);
      const scale   = (off === 0) ? 1 : (abs === 1 ? 0.96 : 0.9);
      const opacity = 1

      // CSS transform ì ìš©
      el.style.transform = `translate(-50%,-50%) translate3d(${x}px, 0, ${depth}px) scale(${scale})`;
      el.style.opacity   = opacity;
      el.style.zIndex    = String(100 - abs * 10);
      el.classList.toggle('is-center', off === 0);
    });

    updateButtons();
  }

  /* =========================
     ì´ë™ í•¨ìˆ˜
     ========================= */
  function go(dir) {
    const n = stage.querySelectorAll('.item').length; // ì¹´ë“œ ìˆ˜
    index = Math.max(0, Math.min(index + dir, n - 1)); // ì¸ë±ìŠ¤ ê°±ì‹  (í´ë¨í”„)
    render();
  }

  /* =========================
     ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
     ========================= */
  function updateButtons() {
    const n = stage.querySelectorAll('.item').length;
    prev.disabled = (index === 0);       // ë§¨ ì™¼ìª½ì´ë©´ prev ë¹„í™œì„±
    next.disabled = (index === n - 1);   // ë§¨ ì˜¤ë¥¸ìª½ì´ë©´ next ë¹„í™œì„±
  }

  /* =========================
     ì´ë²¤íŠ¸ ë“±ë¡
     ========================= */
  prev.addEventListener('click', () => go(-1));
  next.addEventListener('click', () => go(1));

  window.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowLeft')  go(-1);
    if (e.key === 'ArrowRight') go(1);
  });

  // ìŠ¤ì™€ì´í”„ ì œìŠ¤ì²˜ ì§€ì›
  let startX = null;
  let tracking = false;
  const onStart = (x) => { startX = x; tracking = true; };
  const onMove  = (x) => {
    if (!tracking || startX === null) return;
    const dx = x - startX;
    if (Math.abs(dx) > 48) {
      if (dx < 0) go(1); else go(-1);
      tracking = false; startX = null;
    }
  };
  const onEnd   = () => { tracking = false; startX = null; };

  stage.addEventListener('pointerdown', e => onStart(e.clientX));
  stage.addEventListener('pointermove',  e => onMove(e.clientX));
  stage.addEventListener('pointerup', onEnd);
  stage.addEventListener('pointerleave', onEnd);
  stage.addEventListener('pointercancel', onEnd);

  // ì²« ë Œë”ë§ ì‹¤í–‰
  render();
</script>
</body>
</html>
